import{a as Se,b as be,c as C,d as y,e as ge,f as he,g as xe}from"./chunk-7MHP7QIS.js";import{b as ae,c as le,d as x}from"./chunk-VC5NE7AC.js";import{a as ve}from"./chunk-UCXAUVM3.js";import"./chunk-6L735UID.js";import"./chunk-LO7DQJUW.js";import{a as se}from"./chunk-R7UFJOIN.js";import{a as fe}from"./chunk-7P4OHPJZ.js";import{a as $,b as ee,c as te,d as ie}from"./chunk-WIC7PRKY.js";import{a as ne}from"./chunk-43HX63AJ.js";import{g as B,h as V,k as G}from"./chunk-NBLBLHI5.js";import{a as de,b as ce,c as ue}from"./chunk-7ZXVAPC4.js";import{a as X,b as Z}from"./chunk-GJCMJF3E.js";import{F as me,G as pe,w as oe,x as re}from"./chunk-JIRPQRZ4.js";import{b as O,c as a,e as U,f as W,h as l,j as H,k as Y,m as z,o as J,p as K,q as Q}from"./chunk-AYCCJUKC.js";import"./chunk-2ABINMJS.js";import{r as h,z as A}from"./chunk-LOW5GIU2.js";import{$a as S,Ab as g,B as E,Bb as F,Jb as o,Nb as q,Ob as L,Pb as j,Qa as c,Qb as k,Ra as u,Rb as P,T,Y as I,ca as N,d as f,fb as _,hb as d,ma as D,mb as w,na as R,rb as t,sb as i,tb as n,xb as M}from"./chunk-ZC5HX7CF.js";var Ce=(()=>{let s=class s{constructor(e){this.http=e,this.url=`${se.URL_API}`,this.getAllRols=()=>this.http.get(`${this.url}rol`)}};s.\u0275fac=function(m){return new(m||s)(I(A))},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let p=s;return p})();function Re(p,s){p&1&&(t(0,"div",47)(1,"div",37)(2,"span",14),n(3,"input",57),t(4,"label",39),o(5,"Nua"),i()()()())}function Me(p,s){if(p&1){let ye=M();t(0,"p-button",58),g("click",function(){D(ye);let m=F();return R(m.savePromise())}),o(1,"Register"),i()}p&2&&d("text",!0)}function Fe(p,s){p&1&&(t(0,"p-button",59),o(1,"Register"),i()),p&2&&d("text",!0)("disabled",!0)}var gt=(()=>{let s=class s{constructor(e,m,r,b,v,Ee,_e,we,Te,Ie){this.fb=e,this.employesService=m,this.personaService=r,this.cargoService=b,this.tipoempleadoService=v,this.extdocService=Ee,this.tipodocService=_e,this.rolService=we,this.datePipe=Te,this.router=Ie,this.visible=!1,this.dataDtoEmployes={},this.sexo=[{name:"Varon",value:!0},{name:"Mujer",value:0}],this.stateOptions=[{label:"One-Way",value:"one-way"},{label:"Return",value:"return"}],this.value="off",this.itemsCargo=S([]),this.itemsTipoempleado=S([]),this.itemsTipodoc=S([]),this.itemsRols=S([]),this.itemsExtdocs=S([]),this.itemsStadoCivil=[{name:"Soltero/a"},{name:"Casado/a"},{name:"Viudo/a"},{name:"Divorciado/a"}],this.cities=[{name:"New York",code:"NY"},{name:"Rome",code:"RM"},{name:"London",code:"LDN"},{name:"Istanbul",code:"IST"},{name:"Paris",code:"PRS"}],this.stateSearchCI=!1,this.uploadedFiles=[],this.toggleSidebar=()=>this.visible=!this.visible,this.loadCargo(),this.loadTipoEmpleado(),this.loadTipoDoc(),this.loadExtDoc(),this.loadRols(),this.initForm()}ngOnInit(){this.onChangeForm()}initForm(){this.fg=this.fb.group({username:new l("",{validators:[a.required]}),password:new l("",{validators:[a.required]}),rol:new l(0,{validators:[a.required]}),tipodoc:new l(0,{validators:[a.required]}),extdoc:new l(0,{validators:[a.required]}),doc:new l("",{validators:[a.required]}),nombre:new l("",{validators:[a.required]}),app:new l("",{validators:[a.required]}),apm:new l("",{validators:[a.required]}),fnaci:new l("",{validators:[a.required]}),sexo:new l(!0,{validators:[a.required]}),estadociv:new l("",{validators:[a.required]}),dir:new l("",{validators:[a.required]}),telcel:new l("",{validators:[a.required]}),email:new l("",{validators:[a.required,a.email]}),idtipo:new l(0,{validators:[a.required]}),idcargo:new l(0,{validators:[a.required]}),nua:new l("",{validators:[]}),salario:new l(0,{validators:[a.required]})})}onChangeForm(){this.fg.valueChanges.pipe(E(2e3)).subscribe({next:e=>{console.log(e),this.dataDtoEmployes={u_username:e.username,u_password:e.password,u_rol:e.rol&&e.rol.length>0?e.rol[0].id:e.rol,p_doc:e.doc,p_tipodoc:e.tipodoc.id,p_extdoc:e.extdoc.id,p_nombre:e.nombre,p_app:e.app,p_apm:e.apm,p_fnaci:e.fnaci?this.formatearFecha(e.fnaci):"",p_sexo:e.sexo,p_estadociv:e.estadociv.name,p_dir:e.dir,p_telcel:e.telcel,p_email:e.email,e_formacion:e.idtipo.id,e_idcargo:e.idcargo.id,e_nua:e.nua,e_fing:"",e_salario:e.salario},console.log("doc: ",this.dataDtoEmployes,this.stateSearchCI)},error:e=>console.log(e)})}changeDoc(e){this.fg.get("doc").valueChanges.subscribe(r=>{console.log(r),r!==""&&this.stateSearchCI===!1?(console.log("siiiiiiii"),this.searchCI(r)):(console.log("nooooooooooooo"),this.stateSearchCI=r!=="")})}searchCI(e){return f(this,null,function*(){yield this.personaService.getOneEmployeCi(e).pipe(E(2e3)).subscribe({next:m=>{console.log(m),this.stateSearchCI=!0,this.fg.patchValue(m)},error:m=>console.log(m)})})}loadCargo(){return f(this,null,function*(){yield this.cargoService.getAll().subscribe({next:e=>{this.itemsCargo.set(e),console.log(e)},error:e=>{console.log(e)}})})}loadTipoEmpleado(){return f(this,null,function*(){yield this.tipoempleadoService.getAll().subscribe({next:e=>{this.itemsTipoempleado.set(e),console.log(e)},error:e=>console.log(e)})})}loadTipoDoc(){return f(this,null,function*(){yield this.tipodocService.getAllTipoDoc().subscribe({next:e=>this.itemsTipodoc.set(e),error:e=>console.log(e)})})}loadExtDoc(){return f(this,null,function*(){yield this.extdocService.getAllExtDocs().subscribe({next:e=>{this.itemsExtdocs.set(e),console.log(e)},error:e=>console.log(e)})})}loadRols(){return f(this,null,function*(){yield this.rolService.getAllRols().subscribe({next:e=>this.itemsRols.set(e),error:e=>console.log(e)})})}savePromise(){this.employesService.savePromise(this.dataDtoEmployes).then(e=>{console.log(e),console.log(e[0][0].Status),Number(e[0][0].Status)===201&&(console.log("Se registro exitosamente"),this.router.navigate(["/employes"]))})}formatearFecha(e){return e&&this.datePipe.transform(e,"yyyy-MM-dd")||""}clear(){this.fg.reset(),this.stateSearchCI=!1}onUpload(e){console.log(e)}};s.\u0275fac=function(m){return new(m||s)(u(J),u(ve),u(he),u(C),u(x),u(xe),u(y),u(Ce),u(h),u(B))},s.\u0275cmp=N({type:s,selectors:[["app-employes-register"]],standalone:!0,features:[k([C,x,y,h]),P],decls:142,vars:14,consts:[[3,"visibleChange","visible","blockScroll","dismissible"],[1,"sidebar-header"],["pButton","","type","button","icon","pi pi-arrow-left",1,"p-button-text",3,"click"],[1,"sidebar-content"],[1,"menu"],["routerLink","/home"],["routerLink","/about"],["routerLink","/services"],[3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"card"],[1,"grid","formgrid","pb-5"],[1,"col-12","mb-2","lg:col-4","lg:mb-0"],[1,"p-float-label"],["pInputText","","formControlName","doc",1,"p-inputtext-sm",3,"ngModelChange"],["for","nombre"],["placeholder","Select extension Document","optionLabel","abreviatura","formControlName","tipodoc",1,"p-inputtext-sm",3,"options"],["for","float-label"],["placeholder","Select extensiob Document","optionLabel","abreviatura","formControlName","extdoc",1,"p-inputtext-sm",3,"options"],["pInputText","","formControlName","nombre",1,"p-inputtext-sm"],["pInputText","","formControlName","app",1,"p-inputtext-sm"],["for","app"],["pInputText","","formControlName","apm",1,"p-inputtext-sm"],["for","apm"],[1,"col-12","mb-2","lg:col-3","lg:mb-0"],["formControlName","fnaci"],["for","fnaci"],[1,"flex","justify-content-center","align-items-center","mb-1"],[1,"flex","align-items-center"],["id","sexo","name","sexo","value","Varon","formControlName","sexo"],["for","masculino",1,"ml-2"],["id","sexo","name","sexo","value","Mujer","formControlName","sexo"],["for","femenino",1,"ml-2"],["pInputText","","formControlName","telcel",1,"p-inputtext-sm"],["for","telcel"],["placeholder","Select state civil","optionLabel","name","formControlName","estadociv",1,"p-inputtext-sm",3,"options"],[1,"col-12","mb-2","lg:col-6","lg:mb-0"],["pInputText","","formControlName","email",1,"p-inputtext-sm"],["for","float-input","type","email"],["pInputText","","formControlName","dir",1,"p-inputtext-sm"],["for","float-input"],[1,"grid","formgrid","pb-0"],["placeholder","Select Tipo de Formacion","optionLabel","nombre","formControlName","idtipo",1,"p-inputtext-sm",3,"options"],["placeholder","Select Cargo","optionLabel","descrip","formControlName","idcargo",1,"p-inputtext-sm",3,"options"],["pInputText","","formControlName","salario",1,"p-inputtext-sm"],["for","salario"],[1,"grid","formgrid","pb-0","pt-4"],[1,"grid","formgrid"],["pInputText","","formControlName","username",1,"p-inputtext-sm"],["for","username"],["pInputText","","formControlName","password","type","password",1,"p-inputtext-sm"],["for","password"],["inputId","float-label","optionLabel","nombre","formControlName","rol",3,"options"],["severity","danger",3,"text"],["severity","info",3,"click","text"],["severity","primary",3,"text"],["pInputText","","formControlName","nua",1,"p-inputtext-sm"],["severity","primary",3,"click","text"],["severity","primary",3,"text","disabled"]],template:function(m,r){m&1&&(t(0,"p-sidebar",0),j("visibleChange",function(v){return L(r.visible,v)||(r.visible=v),v}),t(1,"div",1)(2,"button",2),g("click",function(){return r.toggleSidebar()}),i()(),t(3,"div",3)(4,"ul",4)(5,"li")(6,"a",5),o(7,"Home"),i()(),t(8,"li")(9,"a",6),o(10,"About"),i()(),t(11,"li")(12,"a",7),o(13,"Services"),i()()()()(),t(14,"form",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"h5"),o(19,"Datos Personales"),i(),t(20,"div",12)(21,"div",13)(22,"span",14)(23,"input",15),g("ngModelChange",function(v){return r.changeDoc(v)}),i(),t(24,"label",16),o(25,"No Documento"),i()()(),t(26,"div",13)(27,"span",14),n(28,"p-dropdown",17),t(29,"label",18),o(30,"Select Tipo doc"),i()()(),t(31,"div",13)(32,"span",14),n(33,"p-dropdown",19),t(34,"label",18),o(35,"Select Extension"),i()()()(),t(36,"div",12)(37,"div",13)(38,"span",14),n(39,"input",20),t(40,"label",16),o(41,"Nombres"),i()()(),t(42,"div",13)(43,"span",14),n(44,"input",21),t(45,"label",22),o(46,"Apellido Paterno"),i()()(),t(47,"div",13)(48,"span",14),n(49,"input",23),t(50,"label",24),o(51,"Apellido Materno"),i()()()(),t(52,"div",12)(53,"div",25)(54,"span",14),n(55,"p-calendar",26),t(56,"label",27),o(57,"Fecha Naciminto"),i()()(),t(58,"div",25)(59,"span",14),o(60,"Sexo"),i(),t(61,"div",28)(62,"div",29),n(63,"p-radioButton",30),t(64,"label",31),o(65,"Varon"),i()(),t(66,"div",29),n(67,"p-radioButton",32),t(68,"label",33),o(69,"Mujer"),i()()()(),t(70,"div",25)(71,"span",14),n(72,"input",34),t(73,"label",35),o(74,"Telefono/Celular"),i()()(),t(75,"div",25)(76,"span",14),n(77,"p-dropdown",36),t(78,"label",18),o(79,"Select a Estado civil "),i()()()(),t(80,"div",12)(81,"div",37)(82,"span",14),n(83,"input",38),t(84,"label",39),o(85,"Email"),i()()(),t(86,"div",37)(87,"span",14),n(88,"input",40),t(89,"label",41),o(90,"Direccion"),i()()()()()(),t(91,"div",10)(92,"div",11)(93,"h5"),o(94,"Datos del empleado"),i(),t(95,"div",42)(96,"div",13)(97,"span",14),n(98,"p-dropdown",43),t(99,"label",18),o(100,"Select Tipo de Formacion "),i()()(),t(101,"div",13)(102,"span",14),n(103,"p-dropdown",44),t(104,"label",18),o(105,"Select a cargo "),i()()(),t(106,"div",13)(107,"span",14),n(108,"input",45),t(109,"label",46),o(110,"Salario"),i()()()(),_(111,Re,6,0,"div",47),i(),t(112,"div",11)(113,"h5"),o(114,"Datos de acceso"),i(),t(115,"div",48)(116,"div",13)(117,"span",14),n(118,"input",49),t(119,"label",50),o(120,"Username"),i()()(),t(121,"div",13)(122,"span",14),n(123,"input",51),t(124,"label",52),o(125,"Password"),i()()(),t(126,"div",13)(127,"p-floatLabel"),n(128,"p-multiSelect",53),t(129,"label",18),o(130,"Select Rols"),i()()(),n(131,"div",13),i()()()(),t(132,"div",28)(133,"div")(134,"p-button",54),o(135,"Cancel"),i()(),t(136,"div")(137,"p-button",55),g("click",function(){return r.clear()}),o(138,"Limpiar"),i()(),t(139,"div"),_(140,Me,2,1,"p-button",56)(141,Fe,2,2),i()()()),m&2&&(q("visible",r.visible),d("blockScroll",!0)("dismissible",!1),c(14),d("formGroup",r.fg),c(14),d("options",r.itemsTipodoc()),c(5),d("options",r.itemsExtdocs()),c(44),d("options",r.itemsStadoCivil),c(21),d("options",r.itemsTipoempleado()),c(5),d("options",r.itemsCargo()),c(8),w(111,r.fg.value.idtipo?111:-1),c(17),d("options",r.itemsRols()),c(6),d("text",!0),c(3),d("text",!0),c(3),w(140,r.fg.valid?140:141))},dependencies:[Q,H,O,U,W,Y,z,K,ie,te,ne,Z,X,le,ae,pe,me,ce,de,oe,re,ue,fe,ee,$,be,Se,G,V,ge]});let p=s;return p})();export{gt as default};
